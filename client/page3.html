<!--
CREATE TABLE `users` (
  `id_user` int(11) NOT NULL,
  `fname` varchar(45) DEFAULT NULL,
  `lname` varchar(45) DEFAULT NULL,
  `work_start` date DEFAULT NULL,
  `work_end` date DEFAULT NULL,
  `status` varchar(45) DEFAULT NULL,
  `title` varchar(45) DEFAULT NULL,
  `team` varchar(45) DEFAULT NULL,
  `phone` varchar(45) DEFAULT NULL,
  `keys` int(11) DEFAULT NULL,
  `lukoton` int(11) DEFAULT NULL,
  `active` int(11) DEFAULT NULL,
  `email` varchar(45) DEFAULT NULL,
  `slack` int(11) DEFAULT NULL,
  `comments` varchar(45) DEFAULT NULL,
  `school` varchar(45) DEFAULT NULL,
  `location` varchar(45) DEFAULT NULL,
  `userscol` varchar(45) DEFAULT NULL,
  `photo` varchar(45) DEFAULT NULL,
  `address` varchar(45) DEFAULT NULL,
  `ad_user` varchar(45) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
-->

<style>
    #div_id {
        background-color: yellow
    }

    p {
        color: red;
        font-size: 16px;
    }

    button {
        font-size: 30px;
    }

    #title_text1 {
        font-size: 16px;
        font-weight: bold;
        background-color:brown;
        color: gold;
    }
</style>

<script>
    function register_user() {
        console.log("----->");
        // e like element, n like new, p like payload


        var e_id_user = document.getElementById("n_id_user").value;

        var e_fname = document.getElementById("n_fname").value;
        var e_lname = document.getElementById("n_lname").value;
        var e_work_start = document.getElementById("n_work_start").value;
        
        var e_work_end = document.getElementById("n_work_end").value;
        var e_status = document.getElementById("n_status").value;
        var e_title = document.getElementById("n_title").value;
        var e_team = document.getElementById("n_team").value;
        
        
        var e_phone = document.getElementById("n_phone").value;
        var e_keys = document.getElementById("n_keys").value;
        var e_lukoton = document.getElementById("n_lukoton").value;
        var e_active = document.getElementById("n_active").value;
        var e_email = document.getElementById("n_email").value;
        
        var e_slack = document.getElementById("n_slack").value;
        
        var e_comments = document.getElementById("n_comments").value;
        var e_school = document.getElementById("n_school").value;
        var e_location = document.getElementById("n_location").value;

        var e_usercol = document.getElementById("n_userscol").value;

        var e_photo = document.getElementById("n_photo").value;
        var e_address = document.getElementById("n_address").value;
        var e_ad_user = document.getElementById("n_ad_user").value;
        

        
        //payload
        //====== PAYLOAD ==================

        let post_body = {
            user_data: {
                p_id_user: e_id_user,
                p_fname: e_fname,
                p_lname: e_lname,
                p_work_start: e_work_start,
                p_work_end: e_work_end,
                p_status: e_status,
                p_title: e_title,
                p_team: e_team,
                p_phone: e_phone,
                p_keys: e_keys,
                p_lukoton: e_lukoton,
                p_active: e_active,
                p_email: e_email,
                p_slack: e_slack,
                p_comments: e_comments,
                p_school: e_school,
                p_location: e_location,
                p_usercol: e_usercol,
                p_photo: e_photo,
                p_address: e_address,
                p_ad_user: e_ad_user
            },
        };

        

        //post body
        let postData = {
            method: 'POST',
            headers: {
                Accept: 'application/json',
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(post_body),
        };

        //fetch
        let host = "http://127.0.0.1:5659";
        let link = "/save_to_database2";

        fetch(host + link, postData)
            .then((resp) => {
                console.log(" >>> first then happen");
                //return resp.json(); 
                return resp.text();
            })
            .then((response) => {
                console.log("Fetch response happen !");
            })
            .catch(function (error_msg) {
                // error if connection problem happens 
                console.log("Fetch error : " + error_msg);
                //  document.getElementById("answer_field").innerHTML = "<div align='center'><font color='red'><h1>Node Server is down ! </h1></font></div>";
            })


        
    }

</script>

<html>
<title></title>

<body>

    <!--
    <div align="center" id="div_id">
        <h1> Register new user </h1><br /><br />
        <p > User id : <input type="text" id="n_id_user"> </p>
        <p>char -> First name : <input type="text" id="n_fname"> </p>
        <p>char -> Last name : <input type="text" id="n_lname"> </p>
        <p> Work start : <input type="text" id="n_work_start"> </p>
        <p> Work end : <input type="text" id="n_work_end"> </p>
        <p>char -> Status : <input type="text" id="n_status"> </p>
        <p>char -> Title : <input type="text" id="n_title"> </p>
        <p>char -> Team : <input type="text" id="n_team"> </p>
        <p>char -> Phone : <input type="text" id="n_phone"> </p>
        <p> Keys : <input type="text" id="n_keys"> </p>
        <p> Lukoton : <input type="text" id="n_lukoton"> </p>
        <p> Active : <input type="text" id="n_active"> </p>
        <p>char -> Email : <input type="text" id="n_email"> </p>
        <p> Slack : <input type="text" id="n_slack"> </p>
        <p>char -> Comment : <input type="text" id="n_comments"> </p>
        <p>char -> School : <input type="text" id="n_school"> </p>
        <p>char -> Location : <input type="text" id="n_location"> </p>
        <p>char -> Userscol : <input type="text" id="n_userscol"> </p>
        <p>char -> Photo : <input type="text" id="n_photo"> </p>
        <p>char -> Address : <input type="text" id="n_address"> </p>
        <p>char -> Ad user : <input type="text" id="n_ad_user"> </p>
        <br /><br />
        <button onclick="register_user()"> Register user </button>
        -->
    

    <div id="title_text1" align="center"> Register new user forms </div>
    <br /><br />
    <div align="center">
        <table>
            <tr id="title_text1">
                <td id="title_text1"> Personal details </td>
                <td></td><td></td>
            </tr>
            <tr>
                <td> First name : <input type="text" id="n_fname"> </td>
                <td> Last name : <input type="text" id="n_lname"> </td>
            </tr>
            <tr>
                <td> Phone : <input type="text" id="n_phone"> </td>
                <td> E-mail : <input type="text" id="n_email"> </td>
                <td> Address : <input type="text" id="n_address"> </td>
            </tr>
            <tr>
                <td> School : <input type="text" id="n_school"> </td>
                <td> Location : <input type="text" id="n_location"> </td>
                <td> Ad user :  <input type="text" id="n_ad_user"></td>
            </tr>
            <tr>
                <td> Photo : <input type="text" id="n_photo"> </td> <td> <input type="file" value="load image"> </td>
                <td></td>
            </tr>

            <tr id="title_text1">
                <td id="title_text1"> Work properties </td>
                <td></td><td></td>
            </tr>
            <tr>
                <td> Title : <input type="text" id="n_title"> </td>
                <td> Status : <input type="text" id="n_status"> </td>
                <td> Team : <input type="text" id="n_team"> </td>
            </tr>
            <tr>
                <td> Work start : <input type="text" id="n_work_start"> </td>
                <td> Work end : <input type="text" id="n_work_end"> </td>
            </tr>
            <tr>
                <td> User col  ????<input type="text" id="n_userscol"> </td>
                <td> User id , ok <input type="text" id="n_id_user"> </td>
            </tr>
            <tr id="title_text1">
                <td id="title_text1"> Permission / Administrative rights </td>
                <td></td><td></td>
            </tr>
            <tr>
                <td> Keys : <input type="text" id="n_keys"> </td>
                <td> Lukoton : <input type="text" id="n_lukoton"> </td>
                <td> Active : <input type="text" id="n_active"> </td>
            </tr>
            <tr>
                <td> <input type="text" id="n_slack"> </td>
            </tr>    
            <tr id="title_text1">
                <td> Comments </td><td></td><td></td>
                <tr>
   
        </table>
        </table>
        <tr>
            <td> <textarea id="n_comments" style="width: 80%; height: 100px;"></textarea> </td>
        </tr>   
        </table>
        <br />
        
         <button id="title_text1" onclick="register_user()"> Confirm registration</button> 
    </div>

    </div>
</body>